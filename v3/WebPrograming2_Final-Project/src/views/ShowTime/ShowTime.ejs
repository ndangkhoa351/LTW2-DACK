<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<h1>Book The Time You Can Go</h1>

<% showtimes.forEach(element => { %>
<button
  class="item"
  data-id="<%= element.uuid %>"
  style="
    display: block;
    cursor: pointer;
    width: 300px;
    height: 200px;
    border: 1px solid black;
    margin-top: 12px;
    text-align: center;
  "
>
  <h2><%= element.startTime %> - <%= element.endTime %></h2>
</button>
<% }) %>

<script>
  $(function () {
    function getParameterURLByName(name, url = window.location.href) {
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return "";
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    const filmID = getParameterURLByName("film_id");

    $(".item").click(function () {
      window.location.href = `/booking/choose-seat?filmID=${filmID}&showtimeID=${$(
        this
      ).data("id")}`;
    });
  });
</script>
